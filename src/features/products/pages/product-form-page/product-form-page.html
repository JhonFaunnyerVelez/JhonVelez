<div class="shell">
  <header class="topbar">
    <div class="brand">
      <span class="brandIcon">游낁</span>
      <span class="brandText">BANCO</span>
    </div>
  </header>

  <main class="card">
    <!-- T칤tulo din치mico -->
    <h2 class="title">
      @if (editId) {
      Editar producto
      } @else {
      Formulario de Registro
      }
    </h2>

    @if (submitError()) {
    <div class="submitError">{{ submitError() }}</div>
    }

    <form [formGroup]="form" (ngSubmit)="submit()" class="form">
      <div class="grid">
        <!-- ID -->
        <div class="field">
          <label>ID</label>
          <input type="text" formControlName="id" [class.invalid]="isInvalid('id')" />
          @if (isInvalid('id')) {
          <div class="err">
            @if (form.get('id')?.errors?.['required']) { <span>Este campo es requerido</span> }
            @else if (form.get('id')?.errors?.['minlength']) { <span>M칤nimo 3 caracteres</span> }
            @else if (form.get('id')?.errors?.['maxlength']) { <span>M치ximo 10 caracteres</span> }
            @else if (form.get('id')?.errors?.['idExists']) { <span>ID no v치lido!</span> }
          </div>
          }
        </div>

        <!-- Nombre -->
        <div class="field">
          <label>Nombre</label>
          <input type="text" formControlName="name" [class.invalid]="isInvalid('name')" />
          @if (isInvalid('name')) {
          <div class="err">
            @if (form.get('name')?.errors?.['required']) { <span>Este campo es requerido</span> }
            @else if (form.get('name')?.errors?.['minlength']) { <span>M칤nimo 6 caracteres</span> }
            @else if (form.get('name')?.errors?.['maxlength']) { <span>M치ximo 100 caracteres</span> }
          </div>
          }
        </div>

        <!-- Descripci칩n -->
        <div class="field">
          <label>Descripci칩n</label>
          <input type="text" formControlName="description" [class.invalid]="isInvalid('description')" />
          @if (isInvalid('description')) {
          <div class="err">
            @if (form.get('description')?.errors?.['required']) { <span>Este campo es requerido</span> }
            @else if (form.get('description')?.errors?.['minlength']) { <span>M칤nimo 10 caracteres</span> }
            @else if (form.get('description')?.errors?.['maxlength']) { <span>M치ximo 200 caracteres</span> }
          </div>
          }
        </div>

        <!-- Logo -->
        <div class="field">
          <label>Logo</label>
          <input type="text" formControlName="logo" [class.invalid]="isInvalid('logo')" />
          @if (isInvalid('logo')) {
          <div class="err">Este campo es requerido</div>
          }
        </div>

        <!-- Fecha Liberaci칩n -->
        <div class="field">
          <label>Fecha Liberaci칩n</label>
          <input type="date" formControlName="date_release" [class.invalid]="isInvalid('date_release')" />
          @if (isInvalid('date_release')) {
          <div class="err">
            @if (form.get('date_release')?.errors?.['required']) {
            <span>Este campo es requerido</span>
            }
            @else if (form.get('date_release')?.errors?.['minToday']) {
            <span>La fecha debe ser hoy o mayor</span>
            }
          </div>
          }
        </div>

        <!-- Fecha Revisi칩n -->
        <div class="field">
          <label>Fecha Revisi칩n</label>
          <input type="date" formControlName="date_revision" />
        </div>

        <div class="field"></div>
      </div>

      <!-- Acciones -->
      <div class="actions">
        <!-- Cancelar -->

        <button type="button" class="btn" routerLink="/products">
          Cancelar
        </button>


        <!-- Reiniciar -->
        <button type="button" class="btn" (click)="reset()" [disabled]="saving()">
          Reiniciar
        </button>

        <!-- Enviar / Actualizar -->
        <button type="submit" class="btnPrimary" [disabled]="saving() || form.invalid">

          @if (saving()) {
          Guardando...
          } @else {
          @if (editId) {
          Actualizar
          } @else {
          Enviar
          }
          }
        </button>
      </div>
    </form>
  </main>
</div>
